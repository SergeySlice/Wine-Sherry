From 9c92bb32b15da5e08444749ca735ba3574164c5d Mon Sep 17 00:00:00 2001
From: Austin English <austinenglish@gmail.com>
Date: Fri, 4 Dec 2015 12:59:51 -0600
Subject: [PATCH] bthprops.cpl: add
 BluetoothFindFirstRadio/BluetoothFindRadioClose stubs

Signed-off-by: Austin English <austinenglish@gmail.com>
---
 dlls/bthprops.cpl/Makefile.in       |  3 +++
 dlls/bthprops.cpl/bthprops.cpl.spec |  4 +--
 dlls/bthprops.cpl/main.c            | 49 +++++++++++++++++++++++++++++++++++++
 include/bluetoothapis.h             | 41 +++++++++++++++++++++++++++++++
 4 files changed, 95 insertions(+), 2 deletions(-)
 create mode 100644 dlls/bthprops.cpl/main.c
 create mode 100644 include/bluetoothapis.h

diff --git a/dlls/bthprops.cpl/Makefile.in b/dlls/bthprops.cpl/Makefile.in
index 402ec46..41dc9df 100644
--- a/dlls/bthprops.cpl/Makefile.in
+++ b/dlls/bthprops.cpl/Makefile.in
@@ -1 +1,4 @@
 MODULE    = bthprops.cpl
+
+C_SRCS = \
+	main.c
diff --git a/dlls/bthprops.cpl/bthprops.cpl.spec b/dlls/bthprops.cpl/bthprops.cpl.spec
index 7a9de48..3842a36 100644
--- a/dlls/bthprops.cpl/bthprops.cpl.spec
+++ b/dlls/bthprops.cpl/bthprops.cpl.spec
@@ -18,7 +18,7 @@
 @ stub BluetoothFindFirstProfileDescriptor
 @ stub BluetoothFindFirstProtocolDescriptorStack
 @ stub BluetoothFindFirstProtocolEntry
-@ stub BluetoothFindFirstRadio
+@ stdcall BluetoothFindFirstRadio(ptr ptr)
 @ stub BluetoothFindFirstService
 @ stub BluetoothFindFirstServiceEx
 @ stub BluetoothFindNextBrowseGroup
@@ -32,7 +32,7 @@
 @ stub BluetoothFindProfileDescriptorClose
 @ stub BluetoothFindProtocolDescriptorStackClose
 @ stub BluetoothFindProtocolEntryClose
-@ stub BluetoothFindRadioClose
+@ stdcall BluetoothFindRadioClose(ptr)
 @ stub BluetoothFindServiceClose
 @ stub BluetoothGetDeviceInfo
 @ stub BluetoothGetRadioInfo
diff --git a/dlls/bthprops.cpl/main.c b/dlls/bthprops.cpl/main.c
new file mode 100644
index 0000000..35727fe
--- /dev/null
+++ b/dlls/bthprops.cpl/main.c
@@ -0,0 +1,49 @@
+/*
+ * Bluetooth properties control panel
+ *
+ * Copyright 2015 Austin English
+ *
+ * This library is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Lesser General Public
+ * License as published by the Free Software Foundation; either
+ * version 2.1 of the License, or (at your option) any later version.
+ *
+ * This library is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with this library; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA
+ *
+ */
+
+#define NONAMELESSUNION
+
+#include <stdarg.h>
+#include <windef.h>
+#include <winbase.h>
+
+#include "wine/debug.h"
+#include "bluetoothapis.h"
+
+WINE_DEFAULT_DEBUG_CHANNEL(bthpropscpl);
+
+/*********************************************************************
+ *  BluetoothFindFirstRadio
+ */
+HBLUETOOTH_RADIO_FIND WINAPI BluetoothFindFirstRadio(BLUETOOTH_FIND_RADIO_PARAMS *params, HANDLE *radio)
+{
+    FIXME("(%p %p): stub!\n", params, radio);
+    *radio = NULL;
+    SetLastError(ERROR_CALL_NOT_IMPLEMENTED);
+    return NULL;
+}
+
+BOOL WINAPI BluetoothFindRadioClose(HBLUETOOTH_RADIO_FIND find)
+{
+    FIXME("(%p): stub!\n", find);
+    SetLastError(ERROR_CALL_NOT_IMPLEMENTED);
+    return FALSE;
+}
diff --git a/include/bluetoothapis.h b/include/bluetoothapis.h
new file mode 100644
index 0000000..d444296
--- /dev/null
+++ b/include/bluetoothapis.h
@@ -0,0 +1,41 @@
+/*
+ * Copyright (C) 2015 Austin English
+ *
+ * This library is free software; you can redistribute it and/or
+ * modify it under the terms of the GNU Lesser General Public
+ * License as published by the Free Software Foundation; either
+ * version 2.1 of the License, or (at your option) any later version.
+ *
+ * This library is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ * Lesser General Public License for more details.
+ *
+ * You should have received a copy of the GNU Lesser General Public
+ * License along with this library; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA
+ */
+#ifndef __BLUETOOTHAPIS_H
+#define __BLUETOOTHAPIS_H
+
+#define BLUETOOTH_MAX_NAME_SIZE           (248)
+#define BLUETOOTH_MAX_PASSKEY_SIZE        (16)
+#define BLUETOOTH_MAX_PASSKEY_BUFFER_SIZE (BLUETOOTH_MAX_PASSKEY_SIZE + 1)
+
+#ifdef __cplusplus
+extern "C" {
+#endif
+
+typedef struct _BLUETOOTH_FIND_RADIO_PARAMS {
+    DWORD  dwSize;
+} BLUETOOTH_FIND_RADIO_PARAMS;
+
+typedef HANDLE HBLUETOOTH_RADIO_FIND;
+
+HBLUETOOTH_RADIO_FIND WINAPI BluetoothFindFirstRadio(BLUETOOTH_FIND_RADIO_PARAMS *, HANDLE *);
+
+#ifdef __cplusplus
+}
+#endif
+
+#endif /* __BLUETOOTHAPIS_H */
-- 
2.4.10
